# 托管和多签名交易


在比特币的协议中，比特币的交易需要多个签名，并可用作托管服务。例如，涉及三个密钥，但只需要其中两个密钥来签名就可以交易。在这种情况下，一个密钥由付款人拥有，第二个密钥由收款人拥有，第三个密钥由托管代理拥有。当没有争议或冲突时，付款人和收款人签署交易，以便收款人可以收到资金。

如果存在争议，托管代理人将审查争议，并在决定付款人或收款人后，将交易签署给托管代理人已决定支持的任何一方。这类似于需要两个人签名的银行支票，在这种情况下是付款人，收款人和托管代理人。比特币交易的托管服务现在确实存在。以下三个主题包含有关如何处理托管以及托管对比特币的影响的讨论。

### 关于半自动托管机制的提案

> 发帖者：Olipro，2010年7月30日，下午07:29:08
> ————————————————————————————————————————————————————
> 因此，基本托管由两个通过第三方工作的人工作，以换取（通常是金钱）某种其他形式的商品或服务。
>
> 在双方都诚实的交易中，托管业务基本上是自动的，因为买方获得他的货物并批准资金的释放，只有在存在争议时才需要人工交互。因此，我提出以下系统：
>
> 1. 您为该金额创建一个托管交易，由您的密钥授权并包含收件人的密钥/数据等 - 在买方批准后续块后才能申请该块，买方也无法收回它没有卖方批准它被退回。
>
> 2. 它进入网络，得到验证并且卖方发送货物，一旦买方获得，他创建了一个发布交易，卖方获得了他的比特币。
>
> 3. 如果发生争议且双方都拒绝以这种或那种方式放钱，显然现在必须让第三方进行仲裁 - 在这种情况下，买卖双方授权第三方的签名是必要时，将给予第三方对原始托管交易的所有权，然后他们可以对此事进行仲裁。

### 回复：关于半自动托管机制的提案

> **发帖者：中本聪，2010年8月5日，下午06:08:30**
> ————————————————————————————————————————————————————
> **接下来，一笔交易被确认需要两个签名来完成。您编写的付款需要收件人和发件人的签名才能使用。要释放托管，您可以向收件人提供您的半边签名，或者收款人可以通过给您签名的一半来退回。在这个简单的案例中没有调解员。追索权是拒绝释放它，基本上是烧钱。**

### 回复：关于半自动托管机制的提议

> **发帖者：中本聪，2010年8月7日，下午08:04:59**
> ————————————————————————————————————————————————————
> &emsp; &emsp; 引用自：jgarzik于2010年8月5日，下午07:00:30
>
> &emsp; &emsp; 由于这种追索权，它不太可能被用作托管机制：
> ————————————————————————————————————————————————————
> **真？你认为人们无法理解这些好处吗？（如果你的回答是一个没有任何好处的论据，我想这会强化人们无法理解它的情况。）**

---

在这里，中本聪创建了一个关于托管处理的特定线程。

### 第三方托管

> **发帖者：中本聪，2010年8月7日，下午08:13:52**
> ————————————————————————————————————————————————————
> 以下是软件中可能出现的托管交易类型的概述。这没有实现，我可能没有时间尽快实现它，但只是为了让你知道它可能是什么。
>
> 基本托管：买方提交支付托管，卖方收到了托管交易的资金，但他在买家解锁之前不能花钱。买家可以在此之后随时解除付款，这可能永远不会。这不允许买方收回这笔钱，但它确实让他可以选择通过永不释放的方式将钱烧掉。卖方可以选择将钱退还给买方。
>
> 虽然这个系统不能保证当事人不会遭受损失，但它会从作弊中获取利润。
>
> 如果卖方没有发送货物，他就不会得到报酬。买家仍然会没钱，但至少卖家没有金钱动机让他变得僵硬。
>
> 买方不能因未付款而受益，他无法收回托管款项。由于缺乏资金，他不能不付钱。卖方可以看到资金已转交给他的钥匙，不能发送给其他任何人。
>
> 现在，一位经济学家会说一个欺诈性的卖家可以开始谈判，比如“释放钱，我会给你一半的回报”，但在那一点上，会有如此少的信任和如此多的讨论，不太可能。为什么欺诈者会信守诺言给你另一半，如果他已经违背诺言偷了他一半？几乎每个人都会原则上拒绝。

### 回复：托管

> 发帖者：jgarzik，2010年8月7日，下午09:25:40
> 
> 我认为，除了烧钱之外没有追索权的买方会限制自身效用。

### 回复：托管

> 发帖者：aceat64，2010年8月8日，上午02:55:59
> -————————————————————————————————————————————————————
> &emsp; &emsp; 来自：jgarzik于2010年8月7日，下午09:25:40
>
> &emsp; &emsp; 我认为，除了烧钱之外没有追索权的买方会限制自身效用。
>
> 也许我们可以以某种方式进行仲裁。 如果买方和卖方都同意，则可以将钱转移给第三方。 然后，该人可以进行仲裁，然后将钱退还给买方，将其交给卖方或窃取（显然，您希望选择值得信赖的仲裁员）。

### 回复：托管

> 发帖者：jgarzik，2010年8月8日，上午03:58:03
> ————————————————————————————————————————————————————
> &emsp; &emsp; 引自：aceat64于2010年8月8日上午02:55:59
> &emsp; &emsp; ————————————————————————————————————————————————————
> &emsp; &emsp; &emsp; &emsp; 引用自：jgarzik于2010年8月7日，下午09:25:40
>
> &emsp; &emsp; &emsp; &emsp; 我认为，除了烧钱之外没有追索权的买方会限制自身效用。
> &emsp; &emsp; &emsp; &emsp; ————————————————————————————————————————————————————
> &emsp; &emsp; 也许我们可以以某种方式进行仲裁。如果买方和卖方都同意，则可以将钱转移给第三方。然后，该人可以进行仲裁，然后将钱退还给买方，将其交给卖方或窃取（显然，您希望选择值得信赖的仲裁员）。
> &emsp; &emsp; ————————————————————————————————————————————————————
> 这就是今天在线托管的运作方式。买方和卖方同意让第三方实际持有这笔钱。买方和卖方都同意中立第三方将遵循的规则，以进行交易解决/赎回。中立的第三方是向一方或另一方支付资金的人。
>
> 这是一个相当不错的概述：[https：//www.escrow.com/solutions/escrow/process.asp](https：//www.escrow.com/solutions/escrow/process.asp)
>
> 有些人可能会选择使用比特币特定的签名托管方法......但我认为“烧钱”追索可以作为完全避免比特币托管的动机，而不是诚实地使用比特币托管的动机。

### 回复：托管

> 发帖者：aceat64，2010年8月8日，上午05:49:44
> ————————————————————————————————————————————————————
> 我喜欢Olipro的建议是这个帖子：[http://bitcointalk.org/index.php？topic=645.0](http://bitcointalk.org/index.php？topic=645.0)
> 
> 买方和卖方都有相同数量的比特币进入托管，卖方在买方签字之前无法取回两套比特币。如果双方同意将资金退还给其原始所有者，或者两个集合都转移到商定的仲裁员，则可选择。我偏离了他的建议，即仲裁员只控制买方一半，我认为他们应该控制两者，以便双方在这个问题上仍然拥有比特币股权。

### 回复：托管

> 发帖者：jgarzik，2010年8月10日，下午06:53:57
> ————————————————————————————————————————————————————
> &emsp; &emsp; 引自：nimnul于2010年8月10日，下午05:51:49
>
> &emsp; &emsp 中本聪的解决方案很好，因为如果客户可以拿回钱，那对卖家来说将是一个大问题。查看互联网信用卡付款和退款的当前情况。退款是卖家的主要PITA，比特币必须不惜一切代价避免。
> &emsp; &emsp; ————————————————————————————————————————————————————
问一些现实世界的企业主是否想告诉他们的客户永远丢失钱的可能性，任何一方都无法收回。

### 回复：托管

> 发帖者：nelisky，2010年8月10日，下午08:20:36
> ————————————————————————————————————————————————————
> 无论技术选项是什么，我认为根据定义，托管总是需要一个可信实体。当事情进展顺利时，我可以看到自动化工作流程非常简单：
>
> * 买方将btc发送给托管，说明接受人的地址
> * 卖方在托管中看到btc，标记为发送到他的地址
> * 买方可以向卖方发放资金
> * 托管将在x天后自动执行
> * 双方都可以提出投诉
>
> 这就是我要自动化的全部内容。当事情变得糟糕时，双方都应该向托管付费（这笔费用可以提前支付给那里的账户？）所以每个人都会失去一些东西。然后托管将只需要调解。因为有费用\*和\*人工中介，从长远来看，成功欺诈的可能性在经济上可能不会有意义。已经信任过的人会成为理想的人，也许只需支付一小笔费用，我们中的一些“普通人”可以帮助主张任何一方的指控，如果我们是他们的一部分。
> 
> 但是，金钱燃烧解决方案虽然能够很好地防止经济上可行的欺诈行为，却无法阻止报复，如果一方不诚实，实际上会让每个人都松散。我当然不会赞同这一点。

### 回复：托管

> **发帖者：中本聪，2010年8月11日，上午01:30:02**
> ————————————————————————————————————————————————————
> &emsp; &emsp; 引自：jgarzik于2010年8月10日，下午06:53:57
>
> &emsp; &emsp; 问一些现实世界的企业主是否想告诉他们的客户永远丢失钱的可能性，任何一方都无法收回。
> &emsp; &emsp; ————————————————————————————————————————————————————
> **这听起来好像可能会以某种方式迷失方向，即使他们想要合作，各方也无法获得它。**
>
> **当你为前期付款时，你也无法收回。消费者似乎对此感到满意，这并不比那更糟糕。**
>
> **任何一方总是可以选择将其发布给另一方。**
> ————————————————————————————————————————————————————
> &emsp; &emsp; 引自：nelisky于2010年8月10日，下午08:20:36
> 
> 但是，金钱燃烧解决方案虽然能够很好地防止经济上可行的欺诈行为，却无法阻止报复，如果一方不诚实，实际上会让每个人都松散。我当然不会赞同这一点。
> &emsp; &emsp; ————————————————————————————————————————————————————
> **然后，您还必须在客户损失的情况下预先支付共同的付款系统。**
>
> **预付款：客户输了，小偷得到了钱。简单的托管：客户输了，但小偷也没有得到钱。**
>
> **你们是说前期付款更好，因为至少小偷得到钱，所以至少有人得到它？**
> 
> **想象一下有人偷了你的东西。你无法得到收回它。但如果可以，它有一个可以远程触发的终止开关，你会这样做吗？对于小偷来说，知道你拥有的一切都有一个杀戮开关，如果他们偷了它，对他们来说是没用的，虽然你还会失去它，这对你来说是件好事吗？如果他们还给你，你可以重新激活它。**
>
> **想象一下，如果黄金被盗时变成了铅。如果小偷把它归还，它又会变成金色。**
>
> **在我看来，问题可能是提出它的问题正确的方式。首先，对于博弈论讨论的目的而言，并非如此直率地讨论“金钱燃烧”。这笔钱永远不会真正被烧毁。您可以选择永久地释放它。**


### 回复：托管

> 发帖者：ribuck，2010年8月11日，上午11:13:12
> ——————————————————————————————————————————————————————————
> &emsp; &emsp; 引自：Inedible于2010年8月11日，上午01:52:53
> 
> &emsp; &emsp; ...羞耻的是，通过提供卖东西，只是为了“烧掉”付款而从不发送货物（假设它们甚至存在），没有任何办法可以减轻恶意。
这只是一个偶然的情况，但也是一个非常真实的威胁。
> &emsp; &emsp; 例如:
>
> &emsp; &emsp; A出售笔记本电脑
> &emsp; &emsp; B提供购买和托管2000比特币
> &emsp; &emsp; A确认该货物已发送但从未发送
> &emsp; &emsp; B永远不会收到它所以永远不会释放比特币
> &emsp; &emsp; A并不关心，因为他们的意图是让B'花费'他们的比特币而没有报酬
> ——————————————————————————————————————————————————————————
> 这个怎么样：
> 
> A提供销售2000个比特币的笔记本电脑，并托管2500比特币作为担保
> B提供购买和托管2500比特币
> A确认该项目已进行但货从未发送
> B永远不会收到它所以永远不要释放比特币
> A现在关心，因为他在托管中有2500比特币作为担保
> 
> 在这种情况下，发送笔记本电脑符合A的利益，否则他将失去他的2500个BTC。确认收到笔记本电脑符合B的利益，否则他将失去他的500BTC“超额”。
>
> 如果A和B都是诚实的，那么尴尬的情况就会出现——没有保险的送货服务会丢失或损坏笔记本电脑，或者如果其中一个参与者在释放托管之前死亡。

**另一个线程后来浮出水面：**

### 如何实施分布式比特币托管服务

> 发帖者：harding，2010年9月26日，上午01:16:18
> ———————————————————————————————————————————————————————————
> 总结：给比特币一个分布式的托管将使其优于所有其他交换媒体，这可能会提高其采用率。细节如下：
>
> 对于去中心化的货币，中心化的托管似乎是今天比特币的标准。一个例子：
>
> 爱丽丝希望从鲍勃手中购买价值5美元的比特币，但是爱丽丝和鲍勃都没有完全信任对方，所以他们去了他们都信任的网站Mt.Gox(门头沟)。在那里，他们存放各自的钱，在那里他们让Mt.Gox(门头沟)为他们进行交换。
> 
> 没有冒犯Mt.Gox（我喜欢的网站门头沟）的意思，但我们可以不使用托管服务吗？
>
> 几乎分布式的替代品：
>
> 查理是一个值得信赖的第三方，它生成一个比特币的私钥。
> 
> 查理然后使用Unix命令*split*将私钥分成两半，一半给爱丽丝，另一半给鲍勃。
>
> 鲍勃将5美元的比特币存入分拆的比特币账户;
>
> 爱丽丝使用公共区块验证交易;
>
> 爱丽丝通过PayPal向鲍勃发送5美元;
>
> 鲍勃验证了PayPal交易;
>
> 鲍勃向爱丽丝发送了他的一半拆分的私钥，以便爱丽丝可以访问他之前存放的比特币。
>
>（为简单起见，我省略了部分PayPal详细信息，例如谁支付交易费用以及您应该等待多长时间以避免退款欺诈。我也忽略了任何鼓励鲍勃执行最后一步的动机。）
>
> 如果我们用Unix命令*split*替换更复杂的东西，可以制作更高级的几乎分布式的例子。例如：Shamir的秘密共享方案实现，如ssss[1]。像ssss这样的实用程序允许爱丽丝和鲍勃在他们遇到分歧的情况下指定仲裁者。
> 
> 当然，所有这一切的问题在于我们必须相信查理不要滥用他创建的复制版本的完整私钥。
>
> 理想的解决方案是爱丽丝和鲍勃各自生成一半的私钥。我不完全理解现代密钥对中使用的数学，但我怀疑使用当前算法是可行的。
>
> 是否有另一种方式让爱丽丝和鲍勃各自获得一半私钥而不将整个密钥交给任何一方？
>
> ——戴夫
> [1]请参阅：[http://en.wikipedia.org/wiki/Shamir's_Secret_Sharing](http://en.wikipedia.org/wiki/Shamir's_Secret_Sharing)

### 回复：如何实施分布式比特币托管服务

> **发帖者：中本聪，2010年9月26日，下午05:34:26**
> ————————————————————————————————————————————————————
> **它尚未实现，但网络可以支持需要两个签名的交易。它在这里描述：[http://bitcointalk.org/index.php？topic=750.0](http://bitcointalk.org/index.php？topic=750.0)**
>
> **如果没有托管，它绝对比直接付款更安全，但不如人工仲裁托管，假设你足够信任人。**
>
> **在这种托管中，骗子无法获胜，但你仍有可能失败。它至少会剥夺欺骗你的利润动机。卖方确信这笔钱是为他保留的，而买方保留了卖方尚未支付的杠杆，直到完成为止。**










